(this["webpackJsonp01-first-project"]=this["webpackJsonp01-first-project"]||[]).push([[0],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(47),a=n(3),c={dialogsData:[{id:11,name:"Pety",ownerId:2},{id:12,name:"Vany",ownerId:3},{id:13,name:"Sasha",ownerId:4}],messagesData:[{id:1,message:"Hello",ownerId:1},{id:2,message:"How are you",ownerId:2},{id:3,message:"Buy",ownerId:2}]},s={sendMessage:function(e){return{type:"social-network/dialogs/SEND_MESSAGE",newMessage:e}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/dialogs/SEND_MESSAGE":return Object(a.a)(Object(a.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[{id:7,message:t.newMessage,ownerId:1}])});default:return e}}},119:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.friends}},12:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return d}));var r=n(3),a=n(97),c=n(92),s=n.n(c),i=(n(1),n(88)),o=n(0),u=["input","meta"],l=["input","meta"],f=function(e){var t=e.meta,n=t.valid,r=t.touched,a=t.error,c=e.children,i=!n&&r;return Object(o.jsxs)("div",{className:s.a.control,children:[c,i&&Object(o.jsx)("span",{className:s.a.control__message,children:a})]})},j=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,u));return Object(o.jsx)(f,Object(r.a)(Object(r.a)({},e),{},{children:Object(o.jsx)("textarea",Object(r.a)(Object(r.a)({},t),n))}))},b=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,l));return Object(o.jsx)(f,Object(r.a)(Object(r.a)({},e),{},{children:Object(o.jsx)("input",Object(r.a)(Object(r.a)({},t),n))}))};function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object(o.jsx)(i.a,{name:e,placeholder:r,component:t,validate:n,type:a})}},131:function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return k})),n.d(t,"d",(function(){return y}));var r=n(7),a=n.n(r),c=n(16),s=n(47),i=n(3),o=n(14),u=n(17),l=n(19),f=n(18),j=n(15),b=new(function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(o.a)(this,n),t.call(this)}return Object(u.a)(n,[{key:"getUsers",value:function(e,t){return this._instance.get("/users?count=".concat(t,"&page=").concat(e))}},{key:"follow",value:function(e){return this._instance.post("/follow/".concat(e),{})}},{key:"unfollow",value:function(e){return this._instance.delete("/follow/".concat(e))}}]),n}(j.b)),d=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(i.a)(Object(i.a)({},e),r):e}))},p={users:[],usersCount:20,pageSize:5,currentPage:0,isFetching:!1,isTogglingFollowUsers:[]},h=function(e){return{type:"social-network/users/FOLLOW",userId:e}},O=function(e){return{type:"social-network/users/UNFOLLOW",userId:e}},v=function(e){return{type:"social-network/users/SET_USERS",users:e}},m=function(e){return{type:"social-network/users/SET_USERS_COUNT",usersCount:e}},x=function(e){return{type:"social-network/users/SET_CURRENT_PAGE",currentPage:e}},_=function(e){return{type:"social-network/users/SET_IS_FETCHING",isFetching:e}},g=function(e,t){return{type:"social-network/users/SET_IS_TOGGLING_FOLLOW_USERS",userId:e,isFetching:t}},w=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(_(!0)),n.prev=1,n.next=4,b.getUsers(e+1,t);case 4:c=n.sent,s=c.data,r(x(e)),r(m(s.totalCount)),r(v(s.items)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),console.log(n.t0);case 14:return n.prev=14,r(_(!1)),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(e){return n.apply(this,arguments)}}()},S=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(g(t,!0)),e.prev=1,e.next=4,c(t);case 4:if(s=e.sent,(i=s.data).resultCode!==j.a.Error){e.next=8;break}throw new Error(i.messages[0]);case 8:n(r(t)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:return e.prev=14,n(g(t,!1)),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",S(e,n,h,b.follow.bind(b)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",S(e,n,O,b.unfollow.bind(b)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/users/FOLLOW":return Object(i.a)(Object(i.a)({},e),{},{users:d(e.users,"id",t.userId,{followed:!0})});case"social-network/users/UNFOLLOW":return Object(i.a)(Object(i.a)({},e),{},{users:d(e.users,"id",t.userId,{followed:!1})});case"social-network/users/SET_USERS":return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case"social-network/users/SET_USERS_COUNT":return Object(i.a)(Object(i.a)({},e),{},{usersCount:t.usersCount});case"social-network/users/SET_CURRENT_PAGE":return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case"social-network/users/SET_IS_FETCHING":return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case"social-network/users/SET_IS_TOGGLING_FOLLOW_USERS":return Object(i.a)(Object(i.a)({},e),{},{isTogglingFollowUsers:t.isFetching?[].concat(Object(s.a)(e.isTogglingFollowUsers),[t.userId]):e.isTogglingFollowUsers.filter((function(e){return e!==t.userId}))});default:return e}}},136:function(e,t,n){e.exports={list:"Friends_list__3v20J"}},137:function(e,t,n){e.exports={item:"FriendMini_item__bCYEg"}},138:function(e,t,n){e.exports={info__avatar:"ProfileInfo_info__avatar__1kwos"}},139:function(e,t,n){e.exports={item:"Post_item__1_hh4"}},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a=n(14),c=n(133),s=n.n(c),i=n(55);!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={}));t.b=function e(){Object(a.a)(this,e),this._instance=void 0,this._instance=s.a.create({baseURL:i.a.baseUrl,withCredentials:!0,headers:{"API-KEY":i.a.token}})}},169:function(e,t,n){},21:function(e,t,n){e.exports={nav:"Navbar_nav__22pHf",list:"Navbar_list__Dorzm",item:"Navbar_item__2UNvS",item_active:"Navbar_item_active__33fC-"}},252:function(e,t,n){},27:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r,a=function(e){return e?void 0:"Required field"},c=(r=30,function(e){return e&&e.length>r?"Max length is ".concat(r):void 0})},294:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),s=n(66),i=n.n(s),o=(n(169),function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,300)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))}),u=n(26),l=n(10),f=n(36),j=n(7),b=n.n(j),d=n(16),p=n(47),h=n(3),O=n(14),v=n(17),m=n(19),x=n(18),_=n(15),g=new(function(e){Object(m.a)(n,e);var t=Object(x.a)(n);function n(){return Object(O.a)(this,n),t.call(this)}return Object(v.a)(n,[{key:"getProfileData",value:function(e){return this._instance.get("/profile/".concat(e))}},{key:"getStatus",value:function(e){return this._instance.get("/profile/status/".concat(e))}},{key:"setStatus",value:function(e){return this._instance.put("/profile/status",{status:e})}},{key:"setPhoto",value:function(e){var t=new FormData;return t.append("image",e),this._instance.put("/profile/photo",t)}},{key:"setProfileData",value:function(e){return this._instance.put("/profile",e)}}]),n}(_.b)),w=n(32),S={postsData:[{id:1,message:"How are you?"},{id:2,message:"It is my first post"}],userInfo:null,userStatus:"no status",isValid:!0},k={addPost:function(e){return{type:"social-network/profile/ADD_POST",newPost:e}},removePost:function(e){return{type:"social-network/profile/REMOVE_POST",index:e}},setUserInfo:function(e){return{type:"social-network/profile/SET_USER_INFO",userInfo:e}},setUserStatus:function(e){return{type:"social-network/profile/SET_USER_STATUS",userStatus:e}},setUserPhotos:function(e){return{type:"social-network/profile/SET_USER_PHOTOS",userPhotos:e}},setIsValid:function(e){return{type:"social-network/profile/SET_VALID",isValid:e}}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/profile/ADD_POST":return Object(h.a)(Object(h.a)({},e),{},{postsData:[].concat(Object(p.a)(e.postsData),[{id:5,message:t.newPost}])});case"social-network/profile/REMOVE_POST":return Object(h.a)(Object(h.a)({},e),{},{postsData:e.postsData.filter((function(e,n){return t.index!==n}))});case"social-network/profile/SET_USER_INFO":return Object(h.a)(Object(h.a)({},e),{},{userInfo:t.userInfo});case"social-network/profile/SET_USER_STATUS":return Object(h.a)(Object(h.a)({},e),{},{userStatus:t.userStatus});case"social-network/profile/SET_USER_PHOTOS":return Object(h.a)(Object(h.a)({},e),{},{userInfo:Object(h.a)(Object(h.a)({},e.userInfo),{},{photos:t.userPhotos})});case"social-network/profile/SET_VALID":return Object(h.a)(Object(h.a)({},e),{},{isValid:t.isValid});default:return e}},E=n(107),I=[{id:2,name:"Pety",avatar:"https://sun9-1.userapi.com/impf/c623226/v623226632/20ec3/wFW0LmxAF5E.jpg?size=1536x2048&quality=96&proxy=1&sign=3c23701904d2894bc56f0539b108dc64&type=album"},{id:3,name:"Vany",avatar:"https://sun9-31.userapi.com/impf/K_i77x3c5rD-pxY1Hu_UzX7uaweHBadmZjnIUg/BaSOzQ1brCo.jpg?size=1620x2160&quality=96&proxy=1&sign=6977728d5d7739f0ff9bf4dd584c78c8&type=album0"},{id:4,name:"Sasha",avatar:"https://sun9-29.userapi.com/impg/7pSRuhuz_LBQ1A7D-_eoWP0JyE8cMhl4NuHAiw/HuSEMS0th20.jpg?size=1906x2160&quality=96&proxy=1&sign=cc30984ecfe23af9466d513b63073748&type=album"}],U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;return e},P=n(131);!function(e){e[e.Captcha=10]="Captcha"}(r||(r={}));var N=new(function(e){Object(m.a)(n,e);var t=Object(x.a)(n);function n(){return Object(O.a)(this,n),t.call(this)}return Object(v.a)(n,[{key:"getCaptcha",value:function(){return this._instance.get("/security/get-captcha-url")}}]),n}(_.b)),T=new(function(e){Object(m.a)(n,e);var t=Object(x.a)(n);function n(){return Object(O.a)(this,n),t.call(this)}return Object(v.a)(n,[{key:"login",value:function(e){return this._instance.post("/auth/login",e)}},{key:"logout",value:function(){return this._instance.delete("/auth/login")}},{key:"auth",value:function(){return this._instance.get("/auth/me")}}]),n}(_.b)),C={email:"",login:"",userId:"",isAuth:!1,captchaUrl:null},D=function(e){return{type:"social-network/auth/SET_USER_DATA",data:{email:e.email,login:e.login,userId:e.userId,isAuth:e.isAuth}}},A=function(e){return{type:"social-network/auth/SET_CAPTCHA_URL",captchaUrl:e}},F=function(){return function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a,c,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.auth();case 3:if(n=e.sent,(r=n.data).resultCode!==_.a.Error){e.next=7;break}throw new Error(r.messages[0]);case 7:a=r.data,c=a.email,s=a.login,i=a.id,t(D({email:c,login:s,userId:i,isAuth:!0})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},L=function(){return function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.getCaptcha();case 3:if(n=e.sent,!(r=n.data.url)){e.next=9;break}t(A(r)),e.next=10;break;case 9:throw new Error("Error with captcha");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/auth/SET_USER_DATA":return Object(h.a)(Object(h.a)({},e),t.data);case"social-network/auth/SET_CAPTCHA_URL":return Object(h.a)(Object(h.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}},M=n(132),V=n(134),z={initialized:!1},H=function(){return{type:"social-network/app/SET_INITIALIZED"}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/app/SET_INITIALIZED":return Object(h.a)(Object(h.a)({},e),{},{initialized:!0});default:return e}},q=Object(l.c)({profilePage:y,dialogsPage:E.b,friends:U,usersPage:P.a,auth:R,form:M.a,app:G}),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,J=Object(l.e)(q,B(Object(l.a)(V.a)));window.__store__=J;var W=J,Z=n(13),Q=(n(252),n(8)),X=n(21),Y=n.n(X),K=n(0),$=function(){return Object(K.jsx)("nav",{className:Y.a.nav,children:Object(K.jsxs)("ul",{className:Y.a.list,children:[Object(K.jsx)("li",{children:Object(K.jsx)(u.b,{className:Y.a.item,activeClassName:Y.a.item_active,to:"/profile",href:"#",children:"Profile"})}),Object(K.jsx)("li",{children:Object(K.jsx)(u.b,{className:Y.a.item,activeClassName:Y.a.item_active,to:"/messages",href:"#",children:"Messages"})}),Object(K.jsx)("li",{children:Object(K.jsx)(u.b,{className:Y.a.item,activeClassName:Y.a.item_active,to:"/news",href:"#",children:"News"})}),Object(K.jsx)("li",{children:Object(K.jsx)(u.b,{className:Y.a.item,activeClassName:Y.a.item_active,to:"/music",href:"#",children:"Music"})}),Object(K.jsx)("li",{children:Object(K.jsx)(u.b,{className:Y.a.item,activeClassName:Y.a.item_active,to:"/settings",href:"#",children:"Settings"})}),Object(K.jsx)("li",{children:Object(K.jsx)(u.b,{className:Y.a.item,activeClassName:Y.a.item_active,to:"/users",href:"#",children:"Find users"})})]})})},ee=n(91),te=n.n(ee),ne=n(136),re=n.n(ne),ae=n(137),ce=n.n(ae),se=function(e){var t=e.name,n=e.avatar;return Object(K.jsxs)("div",{className:ce.a.item,children:[Object(K.jsx)("img",{src:n,alt:"friend's avatar"}),Object(K.jsx)("span",{children:t})]})},ie=function(e){var t=e.friends.map((function(e){return Object(K.jsx)(se,Object(h.a)({},e),e.id)}));return Object(K.jsx)("ul",{className:re.a.list,children:t})},oe=function(e){var t=e.friends;return Object(K.jsxs)("div",{className:te.a.side,children:[Object(K.jsx)("h2",{className:te.a.title,children:"Friends"}),Object(K.jsx)(ie,{friends:t})]})},ue=n(119),le=Object(Z.b)((function(e){return{friends:Object(ue.a)(e)}}),{})(oe),fe=function(e){return e.profilePage.userInfo||{}},je=function(e){return e.profilePage.userStatus},be=function(e){return e.profilePage.postsData},de=function(e){return e.profilePage.isValid},pe=function(e){return e.auth.email||""},he=function(e){return e.auth.login||""},Oe=function(e){return e.auth.userId||""},ve=function(e){return e.auth.isAuth||!1},me=function(e){return e.auth.captchaUrl||""},xe=n(43),_e=n(98),ge=n(138),we=n.n(ge),Se=n(55),ke=function(e){var t=e.status,n=e.updateUserStatus,r=Object(a.useState)(!1),c=Object(f.a)(r,2),s=c[0],i=c[1],o=Object(a.useState)(t),u=Object(f.a)(o,2),l=u[0],j=u[1];Object(a.useEffect)((function(){j(t)}),[t]);var b=function(){i(!1),n(l)};return Object(K.jsx)("div",{children:s?Object(K.jsx)("input",{value:l,onBlur:b,onKeyUp:function(e){e.key===Se.b&&b()},onChange:function(e){j(e.currentTarget.value)},autoFocus:!0}):Object(K.jsx)("span",{onClick:function(){i(!0)},children:l||"---"})})},ye=n(130),Ee=n(12),Ie=n(27),Ue=n(93),Pe=n.n(Ue),Ne=Object(ye.a)({form:"profileData"})((function(e){var t=e.handleSubmit,n=e.error,r=e.initialValues;return Object(K.jsxs)("form",{onSubmit:t,className:Pe.a.form,children:["Name: ",Object(Ee.c)("fullName",Ee.a,[Ie.b],"Full name"),"About me: ",Object(Ee.c)("aboutMe",Ee.b,[Ie.b],"About me"),"Looking for a job: ",Object(Ee.c)("lookingForAJob",Ee.a,[],"Looking for a job","checkbox"),"Skills: ",Object(Ee.c)("lookingForAJobDescription",Ee.a,[Ie.b],"Skills"),"Contacts:",Object(K.jsx)("ul",{children:!!r.contacts&&Object.keys(r.contacts).map((function(e){return Object(K.jsxs)("li",{children:[e,": ",Object(Ee.c)("contacts.".concat(e),Ee.a,[],e)]},e)}))}),n&&Object(K.jsx)("span",{className:Pe.a.form__error,children:n}),Object(K.jsx)("button",{type:"submit",children:"Save"})]})})),Te=function(e){var t=e.fullName,n=e.aboutMe,r=e.lookingForAJob,a=e.lookingForAJobDescription,c=e.contacts;return Object(K.jsxs)("ul",{children:[Object(K.jsxs)("li",{children:["Name: ",t]}),Object(K.jsxs)("li",{children:["About me: ",n]}),Object(K.jsxs)("li",{children:["Looking for a job: ",r]}),Object(K.jsxs)("li",{children:["Skills: ",a]}),Object(K.jsxs)("li",{children:["Contacts:",Object(K.jsx)("ul",{children:!!c&&Object.entries(c).map((function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(K.jsxs)("li",{children:[n,": ",r]},n)}))})]})]})},Ce=function(e){var t=e.profileData,n=e.isValid,r=e.updateUserData,c=Object(a.useState)(!1),s=Object(f.a)(c,2),i=s[0],o=s[1];return Object(K.jsxs)("div",{children:[Object(K.jsx)("button",{onClick:function(){o(!i)},children:"Edit"}),i?Object(K.jsx)(Ne,{initialValues:t,onSubmit:function(e){r(e).then((function(){n&&o(!1)}))}}):Object(K.jsx)(Te,Object(h.a)({},t))]})},De=function(e){var t=e.isOwner,n=e.userInfo,r=e.userStatus,a=e.isValid,c=e.updateUserStatus,s=e.updateUserPhoto,i=e.updateUserData,o=(n||{}).photos;return n?Object(K.jsxs)("div",{children:[Object(K.jsx)("img",{src:"https://cdn.pixabay.com/photo/2020/12/19/03/27/person-5843476_960_720.jpg",alt:"\u043c\u0430\u0448\u0438\u043d\u0430"}),Object(K.jsxs)("div",{children:[Object(K.jsx)("img",{className:we.a.info__avatar,src:(null===o||void 0===o?void 0:o.large)||_e.a,alt:"Avatar"}),t&&Object(K.jsx)("input",{type:"file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&s(e.target.files[0])}}),Object(K.jsx)(Ce,{profileData:n,isValid:a,updateUserData:i}),Object(K.jsx)(ke,{status:r,updateUserStatus:c})]})]}):Object(K.jsx)(xe.a,{})},Ae=n(139),Fe=n.n(Ae),Le=function(e){var t=e.message;return Object(K.jsxs)("div",{className:Fe.a.item,children:[Object(K.jsx)("img",{src:"https://sun9-32.userapi.com/impf/c850220/v850220643/1cf89f/09Ze66DlRZ8.jpg?size=1440x2160&quality=96&proxy=1&sign=8cd83def1f42c508f1c64c607f5504fd&type=album",alt:"avatar"}),t,Object(K.jsx)("div",{children:Object(K.jsx)("span",{children:"Like"})})]})},Re=Object(ye.a)({form:"newPost"})((function(e){var t=e.handleSubmit;return Object(K.jsxs)("form",{onSubmit:t,children:[Object(Ee.c)("newPost",Ee.b,[Ie.b,Ie.a],"New post"),Object(K.jsx)("button",{type:"submit",children:"Add post"})]})})),Me=c.a.memo((function(e){var t=e.addPost,n=e.postsData.map((function(e){var t=e.id,n=e.message;return Object(K.jsx)(Le,{message:n},t)}));return Object(K.jsxs)("div",{children:["My posts",Object(K.jsx)(Re,{onSubmit:function(e){var n=e.newPost;t(n)}}),Object(K.jsx)("div",{children:n})]})})),Ve={addPost:k.addPost},ze=Object(Z.b)((function(e){return{postsData:be(e)}}),Ve)(Me),He=function(e){var t=e.userId,n=e.userInfo,r=e.userStatus,a=e.isValid,c=e.updateUserStatus,s=e.updateUserPhoto,i=e.updateUserData;return Object(K.jsxs)("main",{children:[Object(K.jsx)(De,{isOwner:t===(null===n||void 0===n?void 0:n.userId),userInfo:n,userStatus:r,isValid:a,updateUserStatus:c,updateUserPhoto:s,updateUserData:i}),Object(K.jsx)(ze,{})]})},Ge={getUserInfo:function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.getProfileData(e);case 3:r=t.sent,a=r.data,n(k.setUserInfo(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.getStatus(e);case 3:r=t.sent,a=r.data,n(k.setUserStatus(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.setStatus(e);case 3:r=t.sent,r.data.resultCode===_.a.Success&&n(k.setUserStatus(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},updateUserPhoto:function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.setPhoto(e);case 3:r=t.sent,(a=r.data).resultCode===_.a.Success&&n(k.setUserPhotos(a.data.photos)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},updateUserData:function(e){return function(){var t=Object(d.a)(b.a.mark((function t(n){var r,a,c,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.setProfileData(e);case 3:if(r=t.sent,(a=r.data).resultCode!==_.a.Success){t.next=14;break}return t.next=8,g.getProfileData(e.userId);case 8:c=t.sent,s=c.data,n(k.setIsValid(!0)),n(k.setUserInfo(s)),t.next=16;break;case 14:i=a.messages.reduce((function(e,t){n(k.setIsValid(!1));var r=t.split("("),a=Object(f.a)(r,2),c=a[0],s=a[1];return s.slice(0,s.length-1).split("->").reduce((function(e,t,n,r){if("string"===typeof e)return{};var a=t[0].toLowerCase()+t.slice(1);return a in e||(e[a]=n<r.length-1?{}:c.slice(0,c.length-1)),e[a]}),e),e}),{}),n(Object(w.a)("profileData",i));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}()}},qe=Object(Z.b)((function(e){return{userInfo:fe(e),userStatus:je(e),userId:Oe(e),isValid:de(e)}}),Ge),Be=function(e){Object(m.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(O.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a)))._refreshProfileInfo=function(){var t=e.props,n=t.history,r=t.getUserInfo,a=t.getUserStatus,c=e.props.match.params.userId||e.props.userId||"";c||n.push("/login"),r(c),a(c)},e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this._refreshProfileInfo()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this._refreshProfileInfo()}},{key:"render",value:function(){return Object(K.jsx)(He,Object(h.a)({},this.props))}}]),n}(c.a.Component),Je=Object(l.d)(qe,Q.i)(Be),We=n.p+"static/media/logo.620308a0.svg",Ze=n(71),Qe=n.n(Ze),Xe=function(e){var t=e.login,n=e.logout,r=e.isAuth;return Object(K.jsxs)("header",{className:Qe.a.header,children:[Object(K.jsx)("img",{src:We,alt:"",className:Qe.a.header__logo}),Object(K.jsx)("div",{children:r?Object(K.jsxs)("div",{className:Qe.a.header__nav,children:[Object(K.jsx)("p",{children:t}),Object(K.jsx)("button",{onClick:n,children:"Log out"})]}):Object(K.jsx)(u.b,{to:"/auth",children:"Login"})})]})},Ye={logout:function(){return function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r,a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.logout();case 3:if(n=e.sent,r=n.data,a=r.resultCode,c=r.messages,a!==_.a.Success){e.next=10;break}t(D({email:null,login:null,userId:null,isAuth:!1})),e.next=11;break;case 10:throw new Error(c[0]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()}},Ke=Object(Z.b)((function(e){return{email:pe(e),login:he(e),userId:Oe(e),isAuth:ve(e)}}),Ye),$e=function(e){Object(m.a)(n,e);var t=Object(x.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return Object(K.jsx)(Xe,Object(h.a)({},this.props))}}]),n}(c.a.Component),et=Object(l.d)(Ke)($e),tt=function(e){var t=e.path,n=e.render,r=e.condition,a=e.to;return r?Object(K.jsx)(Q.b,{path:t,render:n}):Object(K.jsx)(Q.a,{to:a})},nt=n(96),rt=n.n(nt),at=Object(ye.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(K.jsxs)("form",{onSubmit:t,className:rt.a.form,children:[Object(Ee.c)("email",Ee.a,[Ie.b,Ie.a],"Email"),Object(Ee.c)("password",Ee.a,[Ie.b,Ie.a],"Password","password"),Object(K.jsxs)("div",{children:[Object(Ee.c)("rememberMe",Ee.a,[],"","checkbox"),"remember me"]}),!!r&&Object(K.jsxs)("div",{children:[Object(K.jsx)("img",{src:r,alt:"captcha"}),Object(Ee.c)("captcha",Ee.a,[],"Text from image")]}),n&&Object(K.jsx)("span",{className:rt.a.form__error,children:n}),Object(K.jsx)("button",{type:"submit",children:"Login"})]})})),ct=function(e){var t=e.isAuth,n=e.login,r=e.captchaUrl,a=Object(Q.g)();return t&&a.push("/profile"),Object(K.jsxs)("div",{children:[Object(K.jsx)("h1",{children:"LOGIN"}),Object(K.jsx)(at,{onSubmit:function(e){n(e)},captchaUrl:r})]})},st={login:function(e){var t=e.email,n=e.password,a=e.rememberMe,c=e.captcha,s=void 0===c?null:c;return function(){var e=Object(d.a)(b.a.mark((function e(c){var i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.login({email:t,password:n,rememberMe:a,captcha:s});case 3:if(i=e.sent,(o=i.data).resultCode!==_.a.Success){e.next=9;break}c(F()),e.next=14;break;case 9:if(o.resultCode!==r.Captcha){e.next=13;break}c(L()),e.next=14;break;case 13:throw new Error(o.messages[0]);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),c(Object(w.a)("login",{_error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()}},it=Object(Z.b)((function(e){return{isAuth:ve(e),captchaUrl:me(e)}}),st),ot=function(e){Object(m.a)(n,e);var t=Object(x.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){return Object(K.jsx)(ct,Object(h.a)({},this.props))}}]),n}(c.a.Component),ut=Object(l.d)(it)(ot),lt=function(e){return e.app.initialized};var ft=function(e){return function(t){return Object(K.jsx)(a.Suspense,{fallback:Object(K.jsx)(xe.a,{}),children:Object(K.jsx)(e,Object(h.a)({},t))})}},jt=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,301)).then((function(e){return e}))})),bt=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,302)).then((function(e){return e}))})),dt={initializing:function(){return function(){var e=Object(d.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(F());case 3:t(H()),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),Error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}},pt=Object(Z.b)((function(e){return{isAuth:ve(e),initialized:lt(e)}}),dt),ht=ft(jt),Ot=ft(bt),vt=function(e){Object(m.a)(n,e);var t=Object(x.a)(n);function n(){return Object(O.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.props.initializing()}},{key:"render",value:function(){var e=this.props,t=e.isAuth;return e.initialized?Object(K.jsxs)("div",{className:"app-wrapper",children:[Object(K.jsx)(et,{}),Object(K.jsx)($,{}),Object(K.jsx)(le,{}),Object(K.jsx)("div",{className:"app-wrapper__content",children:Object(K.jsxs)(Q.d,{children:[Object(K.jsx)(Q.a,{exact:!0,from:"/",to:"/profile"}),Object(K.jsx)(Q.b,{path:"/login",children:Object(K.jsx)(ut,{})}),Object(K.jsx)(Q.b,{path:"/profile/:userId?",children:Object(K.jsx)(Je,{})}),Object(K.jsx)(tt,{path:"/messages",condition:t,to:"/login",render:function(){return Object(K.jsx)(ht,{})}}),Object(K.jsx)(tt,{path:"/users",condition:t,to:"/login",render:function(){return Object(K.jsx)(Ot,{})}}),Object(K.jsx)(Q.b,{path:"/error",children:Object(K.jsx)("div",{children:"ERROR 404 =D"})}),Object(K.jsx)(Q.a,{to:"/error"})]})})]}):Object(K.jsx)(xe.a,{})}}]),n}(c.a.Component),mt=Object(l.d)(Q.i,pt)(vt);i.a.render(Object(K.jsx)(c.a.StrictMode,{children:Object(K.jsx)(u.a,{children:Object(K.jsx)(Z.a,{store:W,children:Object(K.jsx)(mt,{})})})}),document.getElementById("root")),o()},43:function(e,t,n){"use strict";var r=n.p+"static/media/loader.2e72bf7b.gif",a=(n(1),n(0));t.a=function(){return Object(a.jsx)("img",{src:r,alt:"Loader"})}},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r={baseUrl:"https://social-network.samuraijs.com/api/1.0",token:"9b281f13-b744-4cc8-8a50-53b0d0396ab3"},a="Enter"},71:function(e,t,n){e.exports={header:"Header_header__2mwfe",header__logo:"Header_header__logo__3iivq",header__nav:"Header_header__nav__1XPPG"}},91:function(e,t,n){e.exports={side:"SideBar_side__38-4p",title:"SideBar_title__3wRqT"}},92:function(e,t,n){e.exports={control:"FormsControls_control__1yO0J",control__component:"FormsControls_control__component__3xDU9",control__message:"FormsControls_control__message__WqPQo"}},93:function(e,t,n){e.exports={form:"ProfileData_form__3k91N",form__error:"ProfileData_form__error__3IOQ_"}},96:function(e,t,n){e.exports={form:"Login_form__qs7PG",form__error:"Login_form__error__1Yyjz"}},98:function(e,t,n){"use strict";t.a=n.p+"static/media/empty_avatar.0901ad81.svg"}},[[294,1,2]]]);
//# sourceMappingURL=main.e698a715.chunk.js.map