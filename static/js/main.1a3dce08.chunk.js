(this["webpackJsonp01-first-project"]=this["webpackJsonp01-first-project"]||[]).push([[0],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r={baseUrl:"https://social-network.samuraijs.com/api/1.0",token:"9b281f13-b744-4cc8-8a50-53b0d0396ab3"},a="Enter"},113:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.AllUsers=-1]="AllUsers",e[e.Unfollowed=0]="Unfollowed",e[e.Followed=1]="Followed"}(r||(r={}))},150:function(e,t,n){e.exports={posts:"MyPosts_posts__2DBUT",form:"MyPosts_form__3LEU4",form__submit:"MyPosts_form__submit__1gC-w"}},152:function(e,t,n){"use strict";t.a=n.p+"static/media/empty_avatar.0901ad81.svg"},170:function(e,t,n){e.exports={control:"FormsControls_control__3sX1y",control__component:"FormsControls_control__component__jFG-5",control__message:"FormsControls_control__message__2rlul"}},171:function(e,t,n){e.exports={form:"ProfileData_form__1xXzi",form__error:"ProfileData_form__error__2x7MZ"}},174:function(e,t,n){e.exports={button:"UploadButton_button__1Uz35",input:"UploadButton_input__1Loc8"}},176:function(e,t,n){e.exports={form:"LoginPage_form__3RRNd",form__error:"LoginPage_form__error__1w0lZ"}},190:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(95),a=n(9),c={dialogsData:[{id:11,name:"Pety",ownerId:2},{id:12,name:"Vany",ownerId:3},{id:13,name:"Sasha",ownerId:4}],messagesData:[{id:1,message:"Hello",ownerId:1},{id:2,message:"How are you",ownerId:2},{id:3,message:"Buy",ownerId:2}]},s={sendMessage:function(e){return{type:"social-network/dialogs/SEND_MESSAGE",newMessage:e}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/dialogs/SEND_MESSAGE":return Object(a.a)(Object(a.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[{id:7,message:t.newMessage,ownerId:1}])});default:return e}}},213:function(e,t,n){"use strict";n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return I}));var r=n(16),a=n.n(r),c=n(31),s=n(95),o=n(9),i=n(49),u=n(62),l=n(64),j=n(63),b=n(35),f=n(113),d=new(function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.call(this)}return Object(u.a)(n,[{key:"getUsers",value:function(e,t,n){var r=["count=".concat(t),"page=".concat(e)];return n.term&&r.push("term=".concat(n.term)),Number(n.friend)!==f.a.AllUsers&&r.push("friend=".concat(!!Number(n.friend))),this._instance.get("/users?".concat(r.join("&"))).then((function(e){return e.data}))}},{key:"follow",value:function(e){return this._instance.post("/follow/".concat(e),{}).then((function(e){return e.data}))}},{key:"unfollow",value:function(e){return this._instance.delete("/follow/".concat(e)).then((function(e){return e.data}))}}]),n}(b.b)),p=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(o.a)(Object(o.a)({},e),r):e}))},O={users:[],usersCount:20,pageSize:5,currentPage:0,isFetching:!1,isTogglingFollowUsers:[],filters:{term:"",friend:f.a.AllUsers}},h=function(e){return{type:"social-network/users/FOLLOW",userId:e}},m=function(e){return{type:"social-network/users/UNFOLLOW",userId:e}},x=function(e){return{type:"social-network/users/SET_USERS",users:e}},g=function(e){return{type:"social-network/users/SET_USERS_COUNT",usersCount:e}},v=function(e){return{type:"social-network/users/SET_CURRENT_PAGE",currentPage:e}},_=function(e){return{type:"social-network/users/SET_IS_FETCHING",isFetching:e}},w=function(e,t){return{type:"social-network/users/SET_IS_TOGGLING_FOLLOW_USERS",userId:e,isFetching:t}},k=function(e){return{type:"social-network/profile/SET_FILTERS",filters:e}},S=function(e,t,n){return function(){var r=Object(c.a)(a.a.mark((function r(c){var s,o,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c(_(!0)),r.prev=1,r.next=4,d.getUsers(e+1,t,n);case 4:s=r.sent,o=s.totalCount,i=s.items,c(v(e)),c(k(n)),c(g(o)),c(x(i)),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),console.log(r.t0);case 16:return r.prev=16,c(_(!1)),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,13,16,19]])})));return function(e){return r.apply(this,arguments)}}()},y=function(){var e=Object(c.a)(a.a.mark((function e(t,n,r,c){var s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(w(t,!0)),e.prev=1,e.next=4,c(t);case 4:if(s=e.sent,o=s.resultCode,i=s.messages,o!==b.a.Error){e.next=9;break}throw new Error(i[0]);case 9:n(r(t)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return e.prev=15,n(w(t,!1)),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),E=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",y(e,n,h,d.follow.bind(d)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},I=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",y(e,n,m,d.unfollow.bind(d)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/users/FOLLOW":return Object(o.a)(Object(o.a)({},e),{},{users:p(e.users,"id",t.userId,{followed:!0})});case"social-network/users/UNFOLLOW":return Object(o.a)(Object(o.a)({},e),{},{users:p(e.users,"id",t.userId,{followed:!1})});case"social-network/users/SET_USERS":return Object(o.a)(Object(o.a)({},e),{},{users:t.users});case"social-network/users/SET_USERS_COUNT":return Object(o.a)(Object(o.a)({},e),{},{usersCount:t.usersCount});case"social-network/users/SET_CURRENT_PAGE":return Object(o.a)(Object(o.a)({},e),{},{currentPage:t.currentPage});case"social-network/users/SET_IS_FETCHING":return Object(o.a)(Object(o.a)({},e),{},{isFetching:t.isFetching});case"social-network/users/SET_IS_TOGGLING_FOLLOW_USERS":return Object(o.a)(Object(o.a)({},e),{},{isTogglingFollowUsers:t.isFetching?[].concat(Object(s.a)(e.isTogglingFollowUsers),[t.userId]):e.isTogglingFollowUsers.filter((function(e){return e!==t.userId}))});case"social-network/profile/SET_FILTERS":return Object(o.a)(Object(o.a)({},e),{},{filters:t.filters});default:return e}}},224:function(e,t,n){e.exports={info:"ProfileInfo_info__1rWgq",info__avatar:"ProfileInfo_info__avatar__AOwJm"}},230:function(e,t,n){e.exports={main:"ProfilePage_main__3fEUZ"}},231:function(e,t,n){e.exports={logo:"Logo_logo__16f9s"}},232:function(e,t,n){e.exports={header:"Header_header__3Qhnl",header__login:"Header_header__login__3v_jg"}},267:function(e,t,n){},32:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return d}));var r=n(9),a=n(84),c=n(170),s=n.n(c),o=(n(0),n(167)),i=n(3),u=["input","meta"],l=["input","meta"],j=function(e){var t=e.meta,n=t.valid,r=t.touched,a=t.error,c=e.children,o=!n&&r;return Object(i.jsxs)("div",{className:s.a.control,children:[c,o&&Object(i.jsx)("span",{className:s.a.control__message,children:a})]})},b=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,u));return Object(i.jsx)(j,Object(r.a)(Object(r.a)({},e),{},{children:Object(i.jsx)("textarea",Object(r.a)(Object(r.a)({},t),n))}))},f=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,l));return Object(i.jsx)(j,Object(r.a)(Object(r.a)({},e),{},{children:Object(i.jsx)("input",Object(r.a)(Object(r.a)({},t),n))}))};function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object(i.jsx)(o.a,{name:e,placeholder:r,component:t,validate:n,type:a})}},348:function(e,t,n){},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a=n(49),c=n(215),s=n.n(c),o=n(106);!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={}));t.b=function e(){Object(a.a)(this,e),this._instance=void 0,this._instance=s.a.create({baseURL:o.a.baseUrl,withCredentials:!0,headers:{"API-KEY":o.a.token}})}},390:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(44),o=n.n(s),i=(n(267),function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,420)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))}),u=n(51),l=n(26),j=n(52),b=n(16),f=n.n(b),d=n(31),p=n(95),O=n(9),h=n(49),m=n(62),x=n(64),g=n(63),v=n(35),_=new(function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.call(this)}return Object(m.a)(n,[{key:"getProfileData",value:function(e){return this._instance.get("/profile/".concat(e))}},{key:"getStatus",value:function(e){return this._instance.get("/profile/status/".concat(e))}},{key:"setStatus",value:function(e){return this._instance.put("/profile/status",{status:e})}},{key:"setPhoto",value:function(e){var t=new FormData;return t.append("image",e),this._instance.put("/profile/photo",t)}},{key:"setProfileData",value:function(e){return this._instance.put("/profile",e)}}]),n}(v.b)),w=n(73),k={postsData:[{id:1,message:"How are you?"},{id:2,message:"It is my first post"}],userInfo:null,userStatus:"no status",isValid:!0},S=function(e){return{type:"social-network/profile/ADD_POST",newPost:e}},y=function(e){return{type:"social-network/profile/SET_USER_INFO",userInfo:e}},E=function(e){return{type:"social-network/profile/SET_USER_STATUS",userStatus:e}},I=function(e){return{type:"social-network/profile/SET_USER_PHOTOS",userPhotos:e}},C=function(e){return{type:"social-network/profile/SET_VALID",isValid:e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/profile/ADD_POST":return Object(O.a)(Object(O.a)({},e),{},{postsData:[].concat(Object(p.a)(e.postsData),[{id:5,message:t.newPost}])});case"social-network/profile/REMOVE_POST":return Object(O.a)(Object(O.a)({},e),{},{postsData:e.postsData.filter((function(e,n){return t.index!==n}))});case"social-network/profile/SET_USER_INFO":return Object(O.a)(Object(O.a)({},e),{},{userInfo:t.userInfo});case"social-network/profile/SET_USER_STATUS":return Object(O.a)(Object(O.a)({},e),{},{userStatus:t.userStatus});case"social-network/profile/SET_USER_PHOTOS":return Object(O.a)(Object(O.a)({},e),{},{userInfo:Object(O.a)(Object(O.a)({},e.userInfo),{},{photos:t.userPhotos})});case"social-network/profile/SET_VALID":return Object(O.a)(Object(O.a)({},e),{},{isValid:t.isValid});default:return e}},U=n(190),P=[{id:2,name:"Pety",avatar:"https://sun9-1.userapi.com/impf/c623226/v623226632/20ec3/wFW0LmxAF5E.jpg?size=1536x2048&quality=96&proxy=1&sign=3c23701904d2894bc56f0539b108dc64&type=album"},{id:3,name:"Vany",avatar:"https://sun9-31.userapi.com/impf/K_i77x3c5rD-pxY1Hu_UzX7uaweHBadmZjnIUg/BaSOzQ1brCo.jpg?size=1620x2160&quality=96&proxy=1&sign=6977728d5d7739f0ff9bf4dd584c78c8&type=album0"},{id:4,name:"Sasha",avatar:"https://sun9-29.userapi.com/impg/7pSRuhuz_LBQ1A7D-_eoWP0JyE8cMhl4NuHAiw/HuSEMS0th20.jpg?size=1906x2160&quality=96&proxy=1&sign=cc30984ecfe23af9466d513b63073748&type=album"}],F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return e},N=n(213);!function(e){e[e.Captcha=10]="Captcha"}(r||(r={}));var A=new(function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.call(this)}return Object(m.a)(n,[{key:"getCaptcha",value:function(){return this._instance.get("/security/get-captcha-url")}}]),n}(v.b)),D=new(function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(){return Object(h.a)(this,n),t.call(this)}return Object(m.a)(n,[{key:"login",value:function(e){return this._instance.post("/auth/login",e)}},{key:"logout",value:function(){return this._instance.delete("/auth/login")}},{key:"auth",value:function(){return this._instance.get("/auth/me")}}]),n}(v.b)),L={email:"",login:"",userId:"",isAuth:!1,captchaUrl:null},R=function(e){return{type:"social-network/auth/SET_USER_DATA",data:{email:e.email,login:e.login,userId:e.userId,isAuth:e.isAuth}}},M=function(e){return{type:"social-network/auth/SET_CAPTCHA_URL",captchaUrl:e}},H=function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,a,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.auth();case 3:if(n=e.sent,(r=n.data).resultCode!==v.a.Error){e.next=7;break}throw new Error(r.messages[0]);case 7:a=r.data,c=a.email,s=a.login,o=a.id,t(R({email:c,login:s,userId:o,isAuth:!0})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},z=function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.getCaptcha();case 3:if(n=e.sent,!(r=n.data.url)){e.next=9;break}t(M(r)),e.next=10;break;case 9:throw new Error("Error with captcha");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/auth/SET_USER_DATA":return Object(O.a)(Object(O.a)({},e),t.data);case"social-network/auth/SET_CAPTCHA_URL":return Object(O.a)(Object(O.a)({},e),{},{captchaUrl:t.captchaUrl});default:return e}},G=n(214),B=n(216),W={initialized:!1},J=function(){return{type:"social-network/app/SET_INITIALIZED"}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"social-network/app/SET_INITIALIZED":return Object(O.a)(Object(O.a)({},e),{},{initialized:!0});default:return e}},q=Object(l.c)({profilePage:T,dialogsPage:U.b,friends:F,usersPage:N.a,auth:V,form:G.a,app:Y}),Z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,X=Object(l.e)(q,Z(Object(l.a)(B.a)));window.__store__=X;var K,Q=X,$=n(19),ee=(n(348),n(349),n(20)),te=n(177),ne=n(401),re=n(402),ae=n(403),ce=n(404),se=n(405),oe=n(406),ie=n(3),ue=function(){return Object(ie.jsxs)(te.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline",children:[Object(ie.jsx)(te.a.Item,{icon:Object(ie.jsx)(ne.a,{}),children:Object(ie.jsx)(u.b,{to:"/profile",href:"#",children:"Profile"})},"1"),Object(ie.jsx)(te.a.Item,{icon:Object(ie.jsx)(re.a,{}),children:Object(ie.jsx)(u.b,{to:"/messages",href:"#",children:"Messages"})},"2"),Object(ie.jsx)(te.a.Item,{icon:Object(ie.jsx)(ae.a,{}),children:Object(ie.jsx)(u.b,{to:"/news",href:"#",children:"News"})},"3"),Object(ie.jsx)(te.a.Item,{icon:Object(ie.jsx)(ce.a,{}),children:Object(ie.jsx)(u.b,{to:"/music",href:"#",children:"Music"})},"4"),Object(ie.jsx)(te.a.Item,{icon:Object(ie.jsx)(se.a,{}),children:Object(ie.jsx)(u.b,{to:"/settings",href:"#",children:"Settings"})},"5"),Object(ie.jsx)(te.a.Item,{icon:Object(ie.jsx)(oe.a,{}),children:Object(ie.jsx)(u.b,{to:"/users",href:"#",children:"Users"})},"6")]})},le=function(e){return e.auth.login||""},je=function(e){return e.auth.userId||""},be=function(e){return e.auth.isAuth||!1},fe=function(e){return e.auth.captchaUrl||""},de=n(88),pe=n(152),Oe=n(224),he=n.n(Oe),me=n(106),xe=function(e){return e.profilePage.userInfo||{}},ge=function(e){return e.profilePage.userStatus},ve=function(e){return e.profilePage.postsData},_e=function(e){return e.profilePage.isValid},we=function(e){var t=e.isOwner,n=Object($.c)(),r=Object($.d)(ge),c=Object(a.useState)(!1),s=Object(j.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(r),l=Object(j.a)(u,2),b=l[0],p=l[1];Object(a.useEffect)((function(){p(r)}),[r]);var O=function(){i(!1),n(function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.setStatus(e);case 3:t.sent.data.resultCode===v.a.Success&&n(E(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(b))};return Object(ie.jsx)("div",{children:o?Object(ie.jsx)("input",{value:b,onBlur:O,onKeyUp:function(e){e.key===me.b&&O()},onChange:function(e){p(e.currentTarget.value)},autoFocus:!0}):Object(ie.jsx)("span",{onClick:function(){i(t&&!0)},children:b||"---"})})},ke=n(212),Se=n(32),ye=n(67),Ee=n(171),Ie=n.n(Ee),Ce=Object(ke.a)({form:"profileData"})((function(e){var t=e.handleSubmit,n=e.error,r=e.initialValues;return Object(ie.jsxs)("form",{onSubmit:t,className:Ie.a.form,children:["Name: ",Object(Se.c)("fullName",Se.a,[ye.b],"Full name"),"About me: ",Object(Se.c)("aboutMe",Se.b,[ye.b],"About me"),"Looking for a job: ",Object(Se.c)("lookingForAJob",Se.a,[],"Looking for a job","checkbox"),"Skills: ",Object(Se.c)("lookingForAJobDescription",Se.a,[ye.b],"Skills"),"Contacts:",Object(ie.jsx)("ul",{children:!!r.contacts&&Object.keys(r.contacts).map((function(e){return Object(ie.jsxs)("li",{children:[e,": ",Object(Se.c)("contacts.".concat(e),Se.a,[],e)]},e)}))}),n&&Object(ie.jsx)("span",{className:Ie.a.form__error,children:n}),Object(ie.jsx)("button",{type:"submit",children:"Save"})]})})),Te=function(e){var t=e.fullName,n=e.aboutMe,r=e.lookingForAJob,a=e.lookingForAJobDescription,c=e.contacts;return Object(ie.jsxs)("ul",{children:[Object(ie.jsxs)("li",{children:["Name: ",t]}),Object(ie.jsxs)("li",{children:["About me: ",n]}),Object(ie.jsxs)("li",{children:["Looking for a job: ",r]}),Object(ie.jsxs)("li",{children:["Skills: ",a]}),Object(ie.jsxs)("li",{children:["Contacts:",Object(ie.jsx)("ul",{children:!!c&&Object.entries(c).map((function(e){var t=Object(j.a)(e,2),n=t[0],r=t[1];return Object(ie.jsxs)("li",{children:[n,": ",r]},n)}))})]})]})},Ue=function(e){var t=e.profileData,n=e.isOwner,r=Object($.c)(),c=Object($.d)(_e),s=Object(a.useState)(!1),o=Object(j.a)(s,2),i=o[0],u=o[1];Object(a.useEffect)((function(){u(!c)}),[c]);return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("button",{onClick:function(){u(!i&&(n&&!0))},children:"Edit"}),i?Object(ie.jsx)(Ce,{initialValues:t,onSubmit:function(e){var t;r((t=e,function(){var e=Object(d.a)(f.a.mark((function e(n){var r,a,c,s,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.setProfileData(t);case 3:if(r=e.sent,(a=r.data).resultCode!==v.a.Success){e.next=14;break}return e.next=8,_.getProfileData(t.userId);case 8:c=e.sent,s=c.data,n(C(!0)),n(y(s)),e.next=16;break;case 14:o=a.messages.reduce((function(e,t){n(C(!1));var r=t.split("("),a=Object(j.a)(r,2),c=a[0],s=a[1];return s.slice(0,s.length-1).split("->").reduce((function(e,t,n,r){if("string"===typeof e)return{};var a=t[0].toLowerCase()+t.slice(1);return a in e||(e[a]=n<r.length-1?{}:c.slice(0,c.length-1)),e[a]}),e),e}),{}),n(Object(w.a)("profileData",o));case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}()))}}):Object(ie.jsx)(Te,Object(O.a)({},t))]})},Pe=n(397),Fe=n(84),Ne=n(174),Ae=n.n(Ne),De=n(98),Le=n(407),Re=["onChange"],Me=function(e){var t=e.onChange,n=(Object(Fe.a)(e,Re),Object(a.useRef)(null));return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("input",{ref:n,type:"file",onChange:t,className:Ae.a.input}),Object(ie.jsxs)(De.a,{className:Ae.a.button,onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},children:[Object(ie.jsx)(Le.a,{})," Click to Upload"]})]})},He=function(e){var t,n=e.userId,r=Object($.c)(),a=Object($.d)(xe),c=n===(null===a||void 0===a?void 0:a.userId);return a?Object(ie.jsxs)("div",{className:he.a.info,children:[Object(ie.jsx)(Pe.a,{width:256,height:256,src:(null===a||void 0===a||null===(t=a.photos)||void 0===t?void 0:t.large)||pe.a,fallback:pe.a}),c&&Object(ie.jsx)(Me,{onChange:function(e){var t,n;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&r((n=e.target.files[0],function(){var e=Object(d.a)(f.a.mark((function e(t){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.setPhoto(n);case 3:r=e.sent,(a=r.data).resultCode===v.a.Success&&t(I(a.data.photos)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}}),Object(ie.jsx)(we,{isOwner:c}),Object(ie.jsx)(Ue,{profileData:a,isOwner:c})]}):Object(ie.jsx)(de.a,{})},ze=n(97),Ve=n(392),Ge=n(400),Be=n(175),We=n.n(Be),Je=n(408),Ye=n(409),qe=n(410),Ze=n(411),Xe=function(e){var t,n=e.message,r=Object($.d)(xe),c=Object(a.useState)(0),s=Object(j.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(0),l=Object(j.a)(u,2),b=l[0],f=l[1],d=Object(a.useState)(null),p=Object(j.a)(d,2),O=p[0],h=p[1],m=[Object(ie.jsx)(ze.a,{title:"Like",children:Object(ie.jsxs)("span",{onClick:function(){i(1),f(0),h("liked")},children:[Object(a.createElement)("liked"===O?Je.a:Ye.a),Object(ie.jsx)("span",{className:"comment-action",children:o})]})},"post-like"),Object(ie.jsx)(ze.a,{title:"Dislike",children:Object(ie.jsxs)("span",{onClick:function(){i(0),f(1),h("disliked")},children:[Object(a.createElement)("disliked"===O?qe.a:Ze.a),Object(ie.jsx)("span",{className:"comment-action",children:b})]})},"post-dislike"),Object(ie.jsx)("span",{children:"Reply to"},"comment-basic-reply-to")];return Object(ie.jsx)(Ve.a,{actions:m,author:r.fullName,avatar:Object(ie.jsx)(Ge.a,{size:"large",src:Object(ie.jsx)(Pe.a,{src:null===(t=r.photos)||void 0===t?void 0:t.small,preview:!1,style:{width:"100%",height:"100%"}})}),content:Object(ie.jsx)("p",{children:n}),datetime:Object(ie.jsx)(ze.a,{title:We()().format("YYYY-MM-DD HH:mm:ss"),children:Object(ie.jsx)("span",{children:We()().fromNow()})})})},Ke=n(166),Qe=n(396),$e=n(398),et=["form","field","submitCount","hasFeedback"],tt=$e.a.TextArea,nt=(K=tt,function(e){var t=e.form,n=e.field,r=e.submitCount,a=e.hasFeedback,c=Object(Fe.a)(e,et),s=t.touched[n.name],o=r>0,i=t.errors[n.name],u=i&&o,l=i&&s;return Object(ie.jsx)(Qe.a.Item,{hasFeedback:!(!a||!o&&!s),help:!(!u&&!l)&&i,validateStatus:u||l?"error":"success",children:Object(ie.jsx)(K,Object(O.a)(Object(O.a)(Object(O.a)({},n),c),{},{onBlur:function(){return t.setFieldTouched(n.name,!0)},onChange:function(e){return t.setFieldValue(n.name,e.target.value)}}))})}),rt=n(150),at=n.n(rt),ct=function(e){return e?"":"Required!"},st=function(e){var t=e.handleSubmit,n=e.initialValues,r=void 0===n?{newPost:""}:n;return Object(ie.jsx)(Ke.d,{onSubmit:function(){var e=Object(d.a)(f.a.mark((function e(n,r){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,e.next=3,t(n.newPost);case 3:a(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),initialValues:r,children:function(e){var t=e.isSubmitting,n=e.submitForm;return Object(ie.jsxs)(Qe.a,{onFinish:n,className:at.a.form,children:[Object(ie.jsx)(Ke.b,{component:nt,name:"newPost",type:"input",as:"textarea",validate:ct,placeholder:"Write new post...",hasFeedback:!0,showCount:!0,allowClear:!0}),Object(ie.jsx)(De.a,{type:"primary",htmlType:"submit",disabled:t,className:at.a.form__submit,children:"Post"})]})}})},ot=c.a.memo((function(){var e=Object($.c)(),t=Object($.d)(ve).map((function(e){var t=e.id,n=e.message;return Object(ie.jsx)(Xe,{message:n},t)}));return Object(ie.jsxs)("div",{className:at.a.posts,children:[Object(ie.jsx)(st,{handleSubmit:function(t){e(S(t))}}),Object(ie.jsx)("div",{children:t})]})})),it=n(230),ut=n.n(it),lt=function(){var e=Object(ee.g)(),t=Object($.c)(),n=Object(ee.i)(),r=Object($.d)(je),c=Object(a.useRef)(r),s=Object(a.useCallback)((function(){c.current=n.userId||c.current||"",c.current||e.push("/login"),t(function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.getProfileData(e);case 3:r=t.sent,a=r.data,n(y(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(c.current)),t(function(e){return function(){var t=Object(d.a)(f.a.mark((function t(n){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.getStatus(e);case 3:r=t.sent,a=r.data,n(E(a)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(c.current))}),[n,t,e]);return Object(a.useEffect)((function(){s()}),[s]),Object(a.useEffect)((function(){s()}),[n,s]),Object(ie.jsxs)("main",{className:ut.a.main,children:[Object(ie.jsx)(He,{userId:r}),Object(ie.jsx)(ot,{})]})},jt=function(e){var t=e.path,n=e.render,r=e.condition,a=e.to;return r?Object(ie.jsx)(ee.b,{path:t,render:n}):Object(ie.jsx)(ee.a,{to:a})},bt=function(e){return e.app.initialized};var ft=function(e){return function(t){return Object(ie.jsx)(a.Suspense,{fallback:Object(ie.jsx)(de.a,{}),children:Object(ie.jsx)(e,Object(O.a)({},t))})}},dt=n(176),pt=n.n(dt),Ot=Object(ke.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,r=e.captchaUrl;return Object(ie.jsxs)("form",{onSubmit:t,className:pt.a.form,children:[Object(Se.c)("email",Se.a,[ye.b,ye.a],"Email"),Object(Se.c)("password",Se.a,[ye.b,ye.a],"Password","password"),Object(ie.jsxs)("div",{children:[Object(Se.c)("rememberMe",Se.a,[],"","checkbox"),"remember me"]}),!!r&&Object(ie.jsxs)("div",{children:[Object(ie.jsx)("img",{src:r,alt:"captcha"}),Object(Se.c)("captcha",Se.a,[],"Text from image")]}),n&&Object(ie.jsx)("span",{className:pt.a.form__error,children:n}),Object(ie.jsx)("button",{type:"submit",children:"Login"})]})})),ht=function(){var e=Object(ee.g)(),t=Object($.c)(),n=Object($.d)(be),a=Object($.d)(fe);return n&&e.push("/profile"),Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h1",{children:"LOGIN"}),Object(ie.jsx)(Ot,{onSubmit:function(e){t(function(e){var t=e.email,n=e.password,a=e.rememberMe,c=e.captcha,s=void 0===c?null:c;return function(){var e=Object(d.a)(f.a.mark((function e(c){var o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.login({email:t,password:n,rememberMe:a,captcha:s});case 3:if(o=e.sent,(i=o.data).resultCode!==v.a.Success){e.next=9;break}c(H()),e.next=14;break;case 9:if(i.resultCode!==r.Captcha){e.next=13;break}c(z()),e.next=14;break;case 13:throw new Error(i.messages[0]);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),e.t0 instanceof Error&&c(Object(w.a)("login",{_error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()}(e))},captchaUrl:a})]})},mt=n(393),xt=n(399),gt=n.p+"static/media/logo.620308a0.svg",vt=n(231),_t=n.n(vt),wt=function(){return Object(ie.jsx)("div",{className:_t.a.logo,children:Object(ie.jsx)(Pe.a,{preview:!1,src:gt,height:"100%"})})},kt=n(394),St=n(395),yt=n(232),Et=n.n(yt),It=mt.a.Header,Ct=function(){var e=Object($.c)(),t=Object($.d)(le),n=Object($.d)(be);return Object(ie.jsx)(It,{className:"site-layout-background",children:Object(ie.jsx)(kt.a,{justify:"end",gutter:10,children:n?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(St.a,{children:Object(ie.jsx)("p",{className:Et.a.header__login,children:t})}),Object(ie.jsx)(St.a,{children:Object(ie.jsx)(De.a,{onClick:function(){return e(function(){var e=Object(d.a)(f.a.mark((function e(t){var n,r,a,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.logout();case 3:if(n=e.sent,r=n.data,a=r.resultCode,c=r.messages,a!==v.a.Success){e.next=10;break}t(R({email:null,login:null,userId:null,isAuth:!1})),e.next=11;break;case 10:throw new Error(c[0]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())},children:"Log out"})})]}):Object(ie.jsx)(St.a,{children:Object(ie.jsx)(De.a,{children:Object(ie.jsx)(u.b,{to:"/login",children:"Login"})})})})})},Tt=mt.a.Content,Ut=mt.a.Footer,Pt=mt.a.Sider,Ft=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,421)).then((function(e){return e}))})),Nt=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,422)).then((function(e){return e}))})),At={initializing:function(){return function(){var e=Object(d.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(H());case 3:t(J()),e.next=10;break;case 6:if(e.prev=6,e.t0=e.catch(0),"string"!==typeof e.t0){e.next=10;break}throw Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}},Dt=Object($.b)((function(e){return{isAuth:be(e),initialized:bt(e)}}),At),Lt=ft(Ft),Rt=ft(Nt),Mt=function(e){Object(x.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={collapsed:!1},e.onCollapse=function(t){console.log(t),e.setState({collapsed:t})},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.initializing()}},{key:"render",value:function(){var e=this.props,t=e.isAuth,n=e.initialized,r=this.state.collapsed;return n?Object(ie.jsxs)(mt.a,{style:{minHeight:"100vh"},children:[Object(ie.jsxs)(Pt,{collapsible:!0,collapsed:r,onCollapse:this.onCollapse,children:[Object(ie.jsx)(wt,{}),Object(ie.jsx)(ue,{})]}),Object(ie.jsxs)(mt.a,{className:"site-layout",children:[Object(ie.jsx)(Ct,{}),Object(ie.jsxs)(Tt,{style:{margin:"0 16px"},children:[Object(ie.jsxs)(xt.a,{style:{margin:"16px 0"},children:[Object(ie.jsx)(xt.a.Item,{children:"User"}),Object(ie.jsx)(xt.a.Item,{children:"Bill"})]}),Object(ie.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:360},children:Object(ie.jsxs)(ee.d,{children:[Object(ie.jsx)(ee.a,{exact:!0,from:"/",to:"/profile"}),Object(ie.jsx)(ee.b,{path:"/login",children:Object(ie.jsx)(ht,{})}),Object(ie.jsx)(ee.b,{path:"/profile/:userId?",children:Object(ie.jsx)(lt,{})}),Object(ie.jsx)(jt,{path:"/messages",condition:t,to:"/login",render:function(){return Object(ie.jsx)(Lt,{})}}),Object(ie.jsx)(jt,{path:"/users",condition:t,to:"/login",render:function(){return Object(ie.jsx)(Rt,{})}}),Object(ie.jsx)(ee.b,{path:"/error",children:Object(ie.jsx)("div",{children:"ERROR 404 =D"})}),Object(ie.jsx)(ee.a,{to:"/error"})]})})]}),Object(ie.jsx)(Ut,{style:{textAlign:"center"},children:"ForRest\xa9".concat((new Date).getFullYear()," Created by Aleksey Popov")})]})]}):Object(ie.jsx)(de.a,{})}}]),n}(c.a.Component),Ht=Object(l.d)(ee.k,Dt)(Mt);o.a.render(Object(ie.jsx)(c.a.StrictMode,{children:Object(ie.jsx)(u.a,{children:Object(ie.jsx)($.a,{store:Q,children:Object(ie.jsx)(Ht,{})})})}),document.getElementById("root")),i()},67:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r,a=function(e){return e?void 0:"Required field"},c=(r=30,function(e){return e&&e.length>r?"Max length is ".concat(r):void 0})},88:function(e,t,n){"use strict";var r=n.p+"static/media/loader.2e72bf7b.gif",a=(n(0),n(3));t.a=function(){return Object(a.jsx)("img",{src:r,alt:"Loader"})}}},[[390,1,2]]]);
//# sourceMappingURL=main.1a3dce08.chunk.js.map