{"version":3,"sources":["components/common/Paginator/Paginator.module.css","components/Users/User.module.css","../node_modules/querystring-es3/index.js","../node_modules/querystring-es3/decode.js","../node_modules/querystring-es3/encode.js","components/common/Paginator/Paginator.tsx","components/Users/User.tsx","components/Users/SearchUsersForm.tsx","redux/users/selector.ts","components/Users/UsersPage.tsx"],"names":["module","exports","decode","parse","require","encode","stringify","hasOwnProperty","obj","prop","Object","prototype","call","qs","sep","eq","options","length","regexp","split","maxKeys","len","i","kstr","vstr","k","v","x","replace","idx","indexOf","substr","decodeURIComponent","isArray","push","Array","xs","toString","stringifyPrimitive","isFinite","name","undefined","map","objectKeys","ks","encodeURIComponent","join","f","res","keys","key","Paginator","totalPagesCount","currentPage","onClick","pagesPortionSize","useState","Math","floor","currentPortion","setCurrentPortion","pagesBar","totalPortionsCount","ceil","leftNumberItemOfPortion","rightNumberItemOfPortion","min","className","classes","pages__item","pages__item_selected","pages","prevState","pages__items","User","props","id","status","photos","followed","isTogglingFollowUsers","follow","unfollow","to","src","small","emptyAvatar","alt","avatar","disabled","some","togglingId","validation","values","errors","term","SearchUsersForm","onSearch","filters","initialValues","validate","onSubmit","a","setSubmitting","isSubmitting","submitForm","type","component","as","value","FilterFriend","AllUsers","Followed","Unfollowed","getUsersState","state","usersPage","users","getUsersCountState","usersCount","getPageSizeState","pageSize","getCurrentPageState","getIsFetchingState","isFetching","getIsTogglingFollowUsersState","getFilters","UsersPage","dispatch","useDispatch","history","useHistory","location","useLocation","useSelector","currentFilters","loadUsers","page","getUsers","useEffect","search","slice","friend","actualPage","actualFilter","Number","params","String","countPages","handleFollow","handleUnfollow","Preloader","userData"],"mappings":"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","file":"static/js/3.b57dc3e5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pages\":\"Paginator_pages__3EovE\",\"pages__items\":\"Paginator_pages__items__26MLN\",\"pages__item\":\"Paginator_pages__item__WDRUo\",\"pages__item_selected\":\"Paginator_pages__item_selected__372N0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar\":\"User_avatar__1Z9oA\"};","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","import classes from './Paginator.module.css';\r\nimport React, { useState } from 'react';\r\n\r\ninterface Props {\r\n  totalPagesCount: number;\r\n  currentPage: number;\r\n  onClick: (i: number) => void;\r\n  pagesPortionSize?: number;\r\n}\r\n\r\nconst Paginator: React.FC<Props> = ({ totalPagesCount, currentPage, onClick, pagesPortionSize = 10 }) => {\r\n  const [currentPortion, setCurrentPortion] = useState(Math.floor(currentPage / pagesPortionSize));\r\n  const pagesBar                            = [];\r\n  const totalPortionsCount                  = Math.ceil(totalPagesCount / pagesPortionSize);\r\n  const leftNumberItemOfPortion             = pagesPortionSize * currentPortion;\r\n  const rightNumberItemOfPortion            = Math.min(pagesPortionSize * (currentPortion + 1), totalPagesCount);\r\n\r\n  const handleClickPrev = () => {\r\n    setCurrentPortion((prevState => prevState - 1));\r\n  };\r\n\r\n  const handleClickNext = () => {\r\n    setCurrentPortion((prevState => prevState + 1));\r\n  };\r\n\r\n  for (let i = leftNumberItemOfPortion; i < rightNumberItemOfPortion; i++) {\r\n    pagesBar.push(\r\n      <li\r\n        key={i}\r\n        className={`${classes.pages__item} ${currentPage === i\r\n                                             ? classes.pages__item_selected\r\n                                             : undefined}`}\r\n        onClick={() => onClick(i)}>\r\n        {i + 1}\r\n      </li>,\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={classes.pages}>\r\n      {currentPortion > 0 && <button onClick={handleClickPrev}>Prev</button>}\r\n      <nav>\r\n        <ul className={classes.pages__items}>\r\n          {pagesBar}\r\n        </ul>\r\n      </nav>\r\n      {(currentPortion < (totalPortionsCount - 1)) && <button onClick={handleClickNext}>Next</button>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Paginator;\r\n","import { NavLink } from 'react-router-dom';\r\nimport emptyAvatar from '../../images/empty_avatar.svg';\r\nimport classes from './User.module.css';\r\nimport React from 'react';\r\nimport { UserType as UserInterface } from '../../types';\r\n\r\ninterface Props extends UserInterface {\r\n  isTogglingFollowUsers: string[];\r\n  follow: (id: string) => void;\r\n  unfollow: (id: string) => void;\r\n}\r\n\r\nconst User: React.FC<Props> = (props) => {\r\n  const { id, name, status, photos, followed, isTogglingFollowUsers, follow, unfollow } = props;\r\n  return (\r\n    <div>\r\n      <div>\r\n        <NavLink to={`/profile/${id}`}>\r\n          <img src={photos.small || emptyAvatar} alt=\"avatar\" className={classes.avatar}/>\r\n        </NavLink>\r\n        {!followed\r\n         ? <button disabled={isTogglingFollowUsers.some(togglingId => togglingId === id)}\r\n                   onClick={() => {\r\n                     follow(id);\r\n                   }}>Follow</button>\r\n         : <button disabled={isTogglingFollowUsers.some(togglingId => togglingId === id)}\r\n                   onClick={() => {\r\n                     unfollow(id);\r\n                   }}>Unfollow</button>}\r\n      </div>\r\n      <div>\r\n        <div>\r\n          <p>{name}</p>\r\n          <p>{status}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;\r\n","import { ErrorMessage, Field, Form, Formik, FormikErrors } from 'formik';\r\nimport React from 'react';\r\nimport { UserFiltersType } from '../../redux/users/reducer';\r\nimport { FilterFriend } from '../../utils/enums';\r\n\r\ninterface PropsType {\r\n  filters: UserFiltersType;\r\n  onSearch: (filters: UserFiltersType) => void;\r\n}\r\n\r\ninterface FieldsType {\r\n  term: string;\r\n  friend: FilterFriend;\r\n}\r\n\r\nconst validation = (values: FieldsType) => {\r\n  const errors: FormikErrors<FieldsType> = {};\r\n\r\n  if (values.term && values.term.length < 2) {\r\n    errors.term = 'Min length - 2';\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nconst SearchUsersForm: React.FC<PropsType> = ({ onSearch, filters }) => {\r\n  return (\r\n    <Formik\r\n      initialValues={filters}\r\n      validate={validation}\r\n      onSubmit={async (values, { setSubmitting }) => {\r\n        await onSearch(values);\r\n        setSubmitting(false);\r\n      }}\r\n    >\r\n      {({ isSubmitting, submitForm }) => (\r\n        <Form>\r\n          <Field type=\"input\" name=\"term\"/>\r\n          <ErrorMessage name=\"term\" component=\"span\"/>\r\n          <Field as=\"select\" name=\"friend\" disabled={isSubmitting}>\r\n            <option value={FilterFriend.AllUsers}>All users</option>\r\n            <option value={FilterFriend.Followed}>Followed</option>\r\n            <option value={FilterFriend.Unfollowed}>Unfollowed</option>\r\n          </Field>\r\n          <button type=\"submit\" disabled={isSubmitting}>\r\n            Search\r\n          </button>\r\n        </Form>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default SearchUsersForm;\r\n","import { AppStateType } from '../redux-store';\r\n\r\nexport const getUsersState                 = (state: AppStateType) => state.usersPage.users;\r\nexport const getUsersCountState            = (state: AppStateType) => state.usersPage.usersCount;\r\nexport const getPageSizeState              = (state: AppStateType) => state.usersPage.pageSize;\r\nexport const getCurrentPageState           = (state: AppStateType) => state.usersPage.currentPage;\r\nexport const getIsFetchingState            = (state: AppStateType) => state.usersPage.isFetching;\r\nexport const getIsTogglingFollowUsersState = (state: AppStateType) => state.usersPage.isTogglingFollowUsers;\r\nexport const getFilters                    = (state: AppStateType) => state.usersPage.filters;\r\n","import React, { useEffect } from 'react';\r\nimport Preloader from '../common/Preloader/Preloader';\r\nimport Paginator from '../common/Paginator/Paginator';\r\nimport User from './User';\r\nimport { follow, getUsers, unfollow, UserFiltersType } from '../../redux/users/reducer';\r\nimport SearchUsersForm from './SearchUsersForm';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  getCurrentPageState,\r\n  getFilters,\r\n  getIsFetchingState,\r\n  getIsTogglingFollowUsersState,\r\n  getPageSizeState,\r\n  getUsersCountState,\r\n  getUsersState,\r\n} from '../../redux/users/selector';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport { parse, ParsedUrlQueryInput, stringify } from 'querystring';\r\nimport { FilterFriend } from '../../utils/enums';\r\n\r\ninterface QueryParamsType extends ParsedUrlQueryInput {\r\n  term?: string;\r\n  friend?: string;\r\n  page?: string;\r\n}\r\n\r\nconst UsersPage: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  const history  = useHistory();\r\n  const location = useLocation();\r\n\r\n  const users                 = useSelector(getUsersState);\r\n  const usersCount            = useSelector(getUsersCountState);\r\n  const currentPage           = useSelector(getCurrentPageState);\r\n  const pageSize              = useSelector(getPageSizeState);\r\n  const currentFilters        = useSelector(getFilters);\r\n  const isTogglingFollowUsers = useSelector(getIsTogglingFollowUsersState);\r\n  const isFetching            = useSelector(getIsFetchingState);\r\n\r\n  const loadUsers = async (page = currentPage, filters = currentFilters) => {\r\n    await dispatch(getUsers(page, pageSize, filters));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const { page, term, friend } = parse(location.search.slice(1)) as QueryParamsType;\r\n\r\n    let actualPage   = currentPage;\r\n    let actualFilter = currentFilters;\r\n\r\n    if (page) actualPage = Number(page) - 1;\r\n    if (term) actualFilter.term = term;\r\n\r\n    switch (friend) {\r\n      case 'true':\r\n        actualFilter.friend = FilterFriend.Followed;\r\n        break;\r\n      case 'false':\r\n        actualFilter.friend = FilterFriend.Unfollowed;\r\n        break;\r\n      default:\r\n        actualFilter.friend = FilterFriend.AllUsers;\r\n    }\r\n\r\n    loadUsers(actualPage, actualFilter);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const params: QueryParamsType = {};\r\n    const { term, friend }        = currentFilters;\r\n\r\n    if (currentPage) params.page = String(currentPage + 1);\r\n    if (term) params.term = term;\r\n    switch (Number(friend)) {\r\n      case FilterFriend.Followed:\r\n        params.friend = 'true';\r\n        break;\r\n      case FilterFriend.Unfollowed:\r\n        params.friend = 'false';\r\n        break;\r\n    }\r\n\r\n    history.push({ search: stringify(params) });\r\n  }, [currentPage, currentFilters]);\r\n\r\n  const countPages        = usersCount / pageSize;\r\n  const handleClickOnPage = (i: number) => loadUsers(i);\r\n  const handleSearch      = (filters: UserFiltersType) => loadUsers(0, filters);\r\n  const handleFollow      = (id: string) => dispatch(follow(id));\r\n  const handleUnfollow    = (id: string) => dispatch(unfollow(id));\r\n\r\n  return (\r\n    <div>\r\n      <SearchUsersForm onSearch={handleSearch} filters={currentFilters}/>\r\n      {isFetching\r\n       ? <Preloader/>\r\n       : <div>\r\n         <Paginator currentPage={currentPage} totalPagesCount={countPages} onClick={handleClickOnPage}/>\r\n         <ul>\r\n           {\r\n             users.map((userData) => (\r\n               <li key={userData.id}>\r\n                 <User {...userData}\r\n                       isTogglingFollowUsers={isTogglingFollowUsers}\r\n                       follow={handleFollow}\r\n                       unfollow={handleUnfollow}/>\r\n               </li>\r\n             ))\r\n           }\r\n         </ul>\r\n       </div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersPage;\r\n"],"sourceRoot":""}