(this["webpackJsonp01-first-project"]=this["webpackJsonp01-first-project"]||[]).push([[0],{103:function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(45),a=n(3),s="social-network/dialogs/SEND-MESSAGE",c={dialogsData:[{id:11,name:"Pety",ownerId:2},{id:12,name:"Vany",ownerId:3},{id:13,name:"Sasha",ownerId:4}],messagesData:[{id:1,message:"Hello",ownerId:1},{id:2,message:"How are you",ownerId:2},{id:3,message:"Buy",ownerId:2}]},i=function(e){var t=e.newMessage;return{type:s,newMessage:t}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(a.a)(Object(a.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[{id:7,message:t.newMessage,ownerId:1}])});default:return e}}},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.friends}},116:function(e,t,n){"use strict";t.a=n.p+"static/media/empty_avatar.0901ad81.svg"},129:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return I}));var r=n(6),a=n.n(r),s=n(12),c=n(45),i=n(3),u=n(20),o=n(21),l=n(67),f=n.n(l),p=n(32),d=new(function(){function e(){Object(u.a)(this,e),this._instance=f.a.create({baseURL:p.a.baseUrl,withCredentials:!0,headers:{"API-KEY":p.a.token}})}return Object(o.a)(e,[{key:"getUsers",value:function(){var e=Object(s.a)(a.a.mark((function e(t,n){var r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._instance.get("/users?count=".concat(n,"&page=").concat(t));case 2:return r=e.sent,s=r.data,e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"follow",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._instance.post("/follow/".concat(t),{});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unfollow",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._instance.delete("/follow/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),j=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(i.a)(Object(i.a)({},e),r):e}))},b="social-network/users/FOLLOW",h="social-network/users/UNFOLLOW",O="social-network/users/SET_USERS",v="social-network/users/SET_USERS_COUNT",m="social-network/users/SET_CURRENT_PAGE",x="social-network/users/SET_IS_FETCHING",g="social-network/users/SET_IS_TOGGLING_FOLLOW_USERS",_={users:[],usersCount:20,pageSize:5,currentPage:0,isFetching:!1,isTogglingFollowUsers:[]},w=function(e){return{type:b,userId:e}},y=function(e){return{type:h,userId:e}},S=function(e){return{type:x,isFetching:e}},k=function(e,t){return{type:g,userId:e,isFetching:t}},I=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(S(!0)),n.prev=1,n.next=4,d.getUsers(e+1,t);case 4:s=n.sent,r({type:m,currentPage:e}),r((c=s.totalCount,{type:v,usersCount:c})),r((a=s.items,{type:O,users:a})),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.log(n.t0);case 13:return n.prev=13,r(S(!1)),n.finish(13);case 16:case"end":return n.stop()}var a,c}),n,null,[[1,10,13,16]])})));return function(e){return n.apply(this,arguments)}}()},N=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,s){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(k(t,!0)),e.prev=1,e.next=4,s(t);case 4:if(1!==(c=e.sent).resultCode){e.next=7;break}throw new Error(c.messages[0]);case 7:n(r(t)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:return e.prev=13,n(k(t,!1)),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),P=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N(e,n,w,d.follow.bind(d)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N(e,n,y,d.unfollow.bind(d)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(i.a)(Object(i.a)({},e),{},{users:j(e.users,"id",t.userId,{followed:!0})});case h:return Object(i.a)(Object(i.a)({},e),{},{users:j(e.users,"id",t.userId,{followed:!1})});case O:return Object(i.a)(Object(i.a)({},e),{},{users:t.users});case v:return Object(i.a)(Object(i.a)({},e),{},{usersCount:t.usersCount});case m:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case x:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case g:return Object(i.a)(Object(i.a)({},e),{},{isTogglingFollowUsers:t.isFetching?[].concat(Object(c.a)(e.isTogglingFollowUsers),[t.userId]):e.isTogglingFollowUsers.filter((function(e){return e!==t.userId}))});default:return e}}},133:function(e,t,n){e.exports={list:"Friends_list__3QnH4"}},134:function(e,t,n){e.exports={item:"FriendMini_item__3enyf"}},135:function(e,t,n){e.exports={info__avatar:"ProfileInfo_info__avatar__3SAhs"}},136:function(e,t,n){e.exports={item:"Post_item__E_wL4"}},15:function(e,t,n){e.exports={nav:"Navbar_nav__edSRB",list:"Navbar_list__2dmAb",item:"Navbar_item__nZc1_",item_active:"Navbar_item_active__2n9NZ"}},167:function(e,t,n){},250:function(e,t,n){},292:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(64),c=n.n(s),i=(n(167),function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,298)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))}),u=n(22),o=n(10),l=n(6),f=n.n(l),p=n(12),d=n(45),j=n(3),b=n(20),h=n(21),O=n(67),v=n.n(O),m=n(32),x=new(function(){function e(){Object(b.a)(this,e),this._instance=v.a.create({baseURL:m.a.baseUrl,withCredentials:!0,headers:{"API-KEY":m.a.token}})}return Object(h.a)(e,[{key:"login",value:function(e){var t=e.email,n=e.password,r=e.rememberMe;return this._instance.post("/auth/login",{email:t,password:n,rememberMe:r})}},{key:"logout",value:function(){return this._instance.delete("/auth/login")}},{key:"auth",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._instance.get("/auth/me");case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProfileData",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._instance.get("/profile/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._instance.get("/profile/status/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setStatus",value:function(e){return this._instance.put("/profile/status",{status:e})}},{key:"setPhoto",value:function(e){var t=new FormData;return t.append("image",e),this._instance.put("/profile/photo",t)}}]),e}()),g="social-network/reducer/ADD_POST",_="social-network/reducer/REMOVE_POST",w="social-network/reducer/SET_USER_INFO",y="social-network/reducer/SET_USER_STATUS",S="social-network/reducer/SET_USER_PHOTOS",k={postsData:[{id:1,message:"How are you?"},{id:2,message:"It is my first post"}],userInfo:null,userStatus:"no status"},I=function(e){return{type:y,userStatus:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(j.a)(Object(j.a)({},e),{},{postsData:[].concat(Object(d.a)(e.postsData),[{id:5,message:t.newPost}])});case _:return Object(j.a)(Object(j.a)({},e),{},{postsData:e.postsData.filter((function(e,n){return t.index!==n}))});case w:return Object(j.a)(Object(j.a)({},e),{},{userInfo:t.userInfo});case y:return Object(j.a)(Object(j.a)({},e),{},{userStatus:t.userStatus});case S:return Object(j.a)(Object(j.a)({},e),{},{userInfo:Object(j.a)(Object(j.a)({},e.userInfo),{},{photos:t.userPhotos})});default:return e}},P=n(103),E=[{id:2,name:"Pety",avatar:"https://sun9-1.userapi.com/impf/c623226/v623226632/20ec3/wFW0LmxAF5E.jpg?size=1536x2048&quality=96&proxy=1&sign=3c23701904d2894bc56f0539b108dc64&type=album"},{id:3,name:"Vany",avatar:"https://sun9-31.userapi.com/impf/K_i77x3c5rD-pxY1Hu_UzX7uaweHBadmZjnIUg/BaSOzQ1brCo.jpg?size=1620x2160&quality=96&proxy=1&sign=6977728d5d7739f0ff9bf4dd584c78c8&type=album0"},{id:4,name:"Sasha",avatar:"https://sun9-29.userapi.com/impg/7pSRuhuz_LBQ1A7D-_eoWP0JyE8cMhl4NuHAiw/HuSEMS0th20.jpg?size=1906x2160&quality=96&proxy=1&sign=cc30984ecfe23af9466d513b63073748&type=album"}],C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E;return e},U=n(129),A=n(46),F="social-network/auth/SET_USER_DATA",T={email:"",login:"",userId:"",isAuth:!1},D=function(e){var t=e.email,n=e.login,r=e.userId,a=e.isAuth;return{type:F,data:{email:t,login:n,userId:r,isAuth:a}}},L=function(){return function(){var e=Object(p.a)(f.a.mark((function e(t){var n,r,a,s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.auth();case 3:if(1!==(n=e.sent).resultCode){e.next=6;break}throw new Error(n.messages[0]);case 6:r=n.data,a=r.email,s=r.login,c=r.id,t(D({email:a,login:s,userId:c,isAuth:!0})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(j.a)(Object(j.a)({},e),t.data);default:return e}},z=n(130),R=n(131),H="social-network/app/SET_INITIALIZED",B={initialized:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(j.a)(Object(j.a)({},e),{},{initialized:!0});default:return e}},Z=Object(o.c)({profilePage:N,dialogsPage:P.a,friends:C,usersPage:U.a,auth:M,form:z.a,app:G}),q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,W=Object(o.e)(Z,q(Object(o.a)(R.a)));window.__store__=W;var K=W,V=n(13),X=n(30),Y=n(29),J=(n(250),n(8)),Q=n(15),$=n.n(Q),ee=n(1);function te(){return Object(ee.jsx)("nav",{className:$.a.nav,children:Object(ee.jsxs)("ul",{className:$.a.list,children:[Object(ee.jsx)("li",{children:Object(ee.jsx)(u.b,{className:$.a.item,activeClassName:$.a.item_active,to:"/profile",href:"#",children:"Profile"})}),Object(ee.jsx)("li",{children:Object(ee.jsx)(u.b,{className:$.a.item,activeClassName:$.a.item_active,to:"/messages",href:"#",children:"Messages"})}),Object(ee.jsx)("li",{children:Object(ee.jsx)(u.b,{className:$.a.item,activeClassName:$.a.item_active,to:"/news",href:"#",children:"News"})}),Object(ee.jsx)("li",{children:Object(ee.jsx)(u.b,{className:$.a.item,activeClassName:$.a.item_active,to:"/music",href:"#",children:"Music"})}),Object(ee.jsx)("li",{children:Object(ee.jsx)(u.b,{className:$.a.item,activeClassName:$.a.item_active,to:"/settings",href:"#",children:"Settings"})}),Object(ee.jsx)("li",{children:Object(ee.jsx)(u.b,{className:$.a.item,activeClassName:$.a.item_active,to:"/users",href:"#",children:"Find users"})})]})})}var ne=n(91),re=n.n(ne),ae=n(133),se=n.n(ae),ce=n(134),ie=n.n(ce),ue=function(e){var t=e.name,n=e.avatar;return Object(ee.jsxs)("div",{className:ie.a.item,children:[Object(ee.jsx)("img",{src:n,alt:"friend's avatar"}),Object(ee.jsx)("span",{children:t})]})},oe=function(e){var t=e.friends.map((function(e){return Object(ee.jsx)(ue,Object(j.a)({},e),e.id)}));return Object(ee.jsx)("ul",{className:se.a.list,children:t})},le=function(e){var t=e.friends;return Object(ee.jsxs)("div",{className:re.a.side,children:[Object(ee.jsx)("h2",{className:re.a.title,children:"Friends"}),Object(ee.jsx)(oe,{friends:t})]})},fe=n(115),pe=Object(V.b)((function(e){return{friends:Object(fe.a)(e)}}),(function(){return{}}))(le),de=n(40),je=n(116),be=n(135),he=n.n(be),Oe=n(88),ve=function(e){var t=e.status,n=e.updateUserStatus,a=Object(r.useState)(!1),s=Object(Oe.a)(a,2),c=s[0],i=s[1],u=Object(r.useState)(t),o=Object(Oe.a)(u,2),l=o[0],f=o[1];Object(r.useEffect)((function(){f(t)}),[t]);var p=function(){i(!1),n(l)};return Object(ee.jsx)("div",{children:c?Object(ee.jsx)("input",{value:l,onBlur:p,onKeyUp:function(e){e.key===m.b&&p()},onChange:function(e){f(e.currentTarget.value)},autoFocus:!0}):Object(ee.jsx)("span",{onClick:function(){i(!0)},children:l||"---"})})},me=function(e){var t=e.isOwner,n=e.userInfo,r=e.userStatus,a=e.updateUserStatus,s=e.updateUserPhoto,c=n||{},i=c.photos,u=c.fullName,o=c.aboutMe;return n?Object(ee.jsxs)("div",{children:[Object(ee.jsx)("img",{src:"https://cdn.pixabay.com/photo/2020/12/19/03/27/person-5843476_960_720.jpg",alt:"\u043c\u0430\u0448\u0438\u043d\u0430"}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("img",{className:he.a.info__avatar,src:i.large||je.a,alt:"Avatar"}),t&&Object(ee.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&s(e.target.files[0])}}),Object(ee.jsx)(ve,{status:r,updateUserStatus:a}),Object(ee.jsx)("p",{children:u}),Object(ee.jsx)("p",{children:o})]})]}):Object(ee.jsx)(de.a,{})},xe=n(136),ge=n.n(xe),_e=function(e){var t=e.message;return Object(ee.jsxs)("div",{className:ge.a.item,children:[Object(ee.jsx)("img",{src:"https://sun9-32.userapi.com/impf/c850220/v850220643/1cf89f/09Ze66DlRZ8.jpg?size=1440x2160&quality=96&proxy=1&sign=8cd83def1f42c508f1c64c607f5504fd&type=album",alt:"avatar"}),t,Object(ee.jsx)("div",{children:Object(ee.jsx)("span",{children:"Like"})})]})},we=n(127),ye=n(128),Se=n(41),ke=n(34),Ie=Object(ye.a)({form:"newPost"})((function(e){var t=e.handleSubmit;return Object(ee.jsxs)("form",{onSubmit:t,children:[Object(ee.jsx)(we.a,{name:"newPost",placeholder:"New post",component:Se.b,validate:[ke.b,ke.a]}),Object(ee.jsx)("button",{type:"submit",children:"Add post"})]})})),Ne=a.a.memo((function(e){var t=e.addPost,n=e.postsData.map((function(e){var t=e.id,n=e.message;return Object(ee.jsx)(_e,{message:n},t)}));return Object(ee.jsxs)("div",{children:["My posts",Object(ee.jsx)(Ie,{onSubmit:function(e){t(e)}}),Object(ee.jsx)("div",{children:n})]})})),Pe=function(e){return e.profilePage.userInfo},Ee=function(e){return e.profilePage.userStatus},Ce=function(e){return e.profilePage.postsData},Ue={addPost:function(e){var t=e.newPost;return{type:g,newPost:t}}},Ae=Object(V.b)((function(e){return{postsData:Ce(e)}}),Ue)(Ne),Fe=function(e){var t=e.userId,n=e.userInfo,r=e.userStatus,a=e.updateUserStatus,s=e.updateUserPhoto;return Object(ee.jsxs)("main",{children:[Object(ee.jsx)(me,{isOwner:t===(null===n||void 0===n?void 0:n.userId),userInfo:n,userStatus:r,updateUserStatus:a,updateUserPhoto:s}),Object(ee.jsx)(Ae,{})]})},Te=function(e){return e.auth.email},De=function(e){return e.auth.login},Le=function(e){return e.auth.userId},Me=function(e){return e.auth.isAuth},ze=function(e){Object(X.a)(n,e);var t=Object(Y.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a)))._refreshAvatarProfileInfo=function(){var t=e.props,n=t.history,r=t.getUserInfo,a=t.getUserStatus,s=e.props.match.params.userId||e.props.userId;s||n.push("/login"),r(s),a(s)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this._refreshAvatarProfileInfo()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.userId!==e.match.params.userId&&this._refreshAvatarProfileInfo()}},{key:"render",value:function(){return Object(ee.jsx)(Fe,Object(j.a)({},this.props))}}]),n}(a.a.Component),Re={getUserInfo:function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getProfileData(e);case 3:r=t.sent,n({type:w,userInfo:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},getUserStatus:function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.getStatus(e);case 3:r=t.sent,n(I(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.setStatus(e);case 3:r=t.sent,0===r.data.resultCode&&n(I(e)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},updateUserPhoto:function(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var r,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.setPhoto(e);case 3:r=t.sent,0===(a=r.data).resultCode&&n((s=a.data.photos,{type:S,userPhotos:s})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}var s}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},He=Object(o.d)(Object(V.b)((function(e){return{userInfo:Pe(e),userStatus:Ee(e),userId:Le(e)}}),Re),J.i)(ze),Be=n.p+"static/media/logo.620308a0.svg",Ge=n(71),Ze=n.n(Ge);function qe(e){var t=e.login,n=e.logout,r=e.isAuth;return Object(ee.jsxs)("header",{className:Ze.a.header,children:[Object(ee.jsx)("img",{src:Be,alt:"",className:Ze.a.header__logo}),Object(ee.jsx)("div",{children:r?Object(ee.jsxs)("div",{className:Ze.a.header__nav,children:[Object(ee.jsx)("p",{children:t}),Object(ee.jsx)("button",{onClick:n,children:"Log out"})]}):Object(ee.jsx)(u.b,{to:"/auth",children:"Login"})})]})}var We=function(e){Object(X.a)(n,e);var t=Object(Y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(ee.jsx)(qe,Object(j.a)({},this.props))}}]),n}(a.a.Component),Ke={logout:function(){return function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.logout();case 3:if(1!==(n=e.sent).resultCode){e.next=6;break}throw new Error(n.messages[0]);case 6:t(D({email:null,login:null,userId:null,isAuth:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}},Ve=Object(o.d)(Object(V.b)((function(e){return{email:Te(e),login:De(e),userId:Le(e),isAuth:Me(e)}}),Ke))(We);var Xe=function(e){var t=e.children,n=e.condition,r=e.to;return Object(ee.jsx)(J.b,{children:function(){return n?t:Object(ee.jsx)(J.a,{to:r})}})},Ye=n(94),Je=n.n(Ye);var Qe=Object(ye.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(ee.jsxs)("form",{onSubmit:t,className:Je.a.form,children:[Object(ee.jsx)(we.a,{name:"email",placeholder:"Email",component:Se.a,validate:[ke.b,ke.a]}),Object(ee.jsx)(we.a,{name:"password",placeholder:"Password",component:Se.a,validate:[ke.b,ke.a],type:"password"}),Object(ee.jsxs)("div",{children:[Object(ee.jsx)(we.a,{name:"rememberMe",component:Se.a,type:"checkbox"}),"remember me"]}),n&&Object(ee.jsx)("span",{className:Je.a.form__error,children:n}),Object(ee.jsx)("button",{type:"submit",children:"Login"})]})}));var $e=function(e){var t=e.isAuth,n=e.login,r=Object(J.g)();return t&&r.push("/profile"),Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h1",{children:"LOGIN"}),Object(ee.jsx)(Qe,{onSubmit:function(e){n(e)}})]})},et=function(e){Object(X.a)(n,e);var t=Object(Y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(ee.jsx)($e,Object(j.a)({},this.props))}}]),n}(a.a.Component),tt={login:function(e){var t=e.email,n=e.password,r=e.rememberMe;return function(){var e=Object(p.a)(f.a.mark((function e(a){var s,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.login({email:t,password:n,rememberMe:r});case 3:if(s=e.sent,1!==(c=s.data).resultCode){e.next=7;break}throw new Error(c.messages[0]);case 7:a(L()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),a(Object(A.a)("login",{_error:e.t0.message}));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()}},nt=Object(o.d)(Object(V.b)((function(e){return{isAuth:Me(e)}}),tt))(et),rt=function(e){return e.app.initialized};var at=function(e){return function(t){return Object(ee.jsx)(r.Suspense,{fallback:Object(ee.jsx)(de.a,{}),children:Object(ee.jsx)(e,Object(j.a)({},t))})}},st=Object(r.lazy)((function(){return n.e(3).then(n.bind(null,299)).then((function(e){return e}))})),ct=Object(r.lazy)((function(){return n.e(4).then(n.bind(null,300)).then((function(e){return e}))})),it=function(e){Object(X.a)(n,e);var t=Object(Y.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.initializing()}},{key:"render",value:function(){var e=this.props,t=e.isAuth;return e.initialized?Object(ee.jsxs)("div",{className:"app-wrapper",children:[Object(ee.jsx)(Ve,{}),Object(ee.jsx)(te,{}),Object(ee.jsx)(pe,{}),Object(ee.jsx)("div",{className:"app-wrapper__content",children:Object(ee.jsxs)(J.d,{children:[Object(ee.jsx)(J.b,{path:"/login",children:Object(ee.jsx)(nt,{})}),Object(ee.jsx)(J.b,{path:"/profile/:userId?",children:Object(ee.jsx)(He,{})}),Object(ee.jsxs)(Xe,{condition:t,to:"/login",children:[Object(ee.jsx)(J.b,{path:"/messages",render:at(st)}),Object(ee.jsx)(J.b,{path:"/users",render:at(ct)})]}),Object(ee.jsx)(J.b,{exact:!0,path:"/",children:Object(ee.jsx)(J.a,{to:"/profile"})})]})})]}):Object(ee.jsx)(de.a,{})}}]),n}(a.a.Component),ut={initializing:function(){return function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(L());case 3:t({type:H}),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),Error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}},ot=Object(o.d)(J.i,Object(V.b)((function(e){return{isAuth:Me(e),initialized:rt(e)}}),ut))(it);c.a.render(Object(ee.jsx)(a.a.StrictMode,{children:Object(ee.jsx)(u.a,{children:Object(ee.jsx)(V.a,{store:K,children:Object(ee.jsx)(ot,{})})})}),document.getElementById("root")),i()},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r={baseUrl:"https://social-network.samuraijs.com/api/1.0",token:"9b281f13-b744-4cc8-8a50-53b0d0396ab3"},a="Enter"},34:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r,a=function(e){return e?void 0:"Required field"},s=(r=30,function(e){return e&&e.length>r?"Max length is ".concat(r):void 0})},40:function(e,t,n){"use strict";var r=n.p+"static/media/loader.2e72bf7b.gif",a=(n(0),n(1));t.a=function(){return Object(a.jsx)("img",{src:r,alt:"Loader"})}},41:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return f}));var r=n(3),a=n(137),s=n(69),c=n.n(s),i=n(1),u=["Component","input","meta"],o=function(e){var t=e.Component,n=e.input,s=e.meta,o=s.valid,l=s.touched,f=s.error,p=Object(a.a)(e,u),d=!o&&l;return Object(i.jsxs)("div",{className:c.a.control,children:[Object(i.jsx)(t,Object(r.a)(Object(r.a)({className:d?c.a.control__component:void 0},n),p)),d&&Object(i.jsx)("span",{className:c.a.control__message,children:f})]})},l=function(e){return Object(i.jsx)(o,Object(r.a)({Component:"textarea"},e))},f=function(e){return Object(i.jsx)(o,Object(r.a)({Component:"input"},e))}},69:function(e,t,n){e.exports={control:"FormsControls_control__1prlx",control__component:"FormsControls_control__component__adX83",control__message:"FormsControls_control__message__Ydg7H"}},71:function(e,t,n){e.exports={header:"Header_header__3N93h",header__logo:"Header_header__logo__2A_Px",header__nav:"Header_header__nav__14bMn"}},91:function(e,t,n){e.exports={side:"SideBar_side__3v3le",title:"SideBar_title__1CMfw"}},94:function(e,t,n){e.exports={form:"Login_form__3enBs",form__error:"Login_form__error__1UlGS"}}},[[292,1,2]]]);
//# sourceMappingURL=main.ce1533f4.chunk.js.map